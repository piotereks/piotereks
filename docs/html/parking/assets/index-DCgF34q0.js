import{r as ge,g as ce,a as x,R as P,L as Z,E as fe}from"./vendor-echarts-nZu8rBDa.js";import{r as ye}from"./vendor-react-BVyvVbwp.js";import{r as be}from"./vendor-utils-F0zOxUcV.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function o(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(c){if(c.ep)return;c.ep=!0;const d=o(c);fetch(c.href,d)}})();var B={exports:{}},M={};var Q;function Se(){if(Q)return M;Q=1;var e=ge(),t=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function f(S,g,m){var y,w={},u=null,T=null;m!==void 0&&(u=""+m),g.key!==void 0&&(u=""+g.key),g.ref!==void 0&&(T=g.ref);for(y in g)a.call(g,y)&&!d.hasOwnProperty(y)&&(w[y]=g[y]);if(S&&S.defaultProps)for(y in g=S.defaultProps,g)w[y]===void 0&&(w[y]=g[y]);return{$$typeof:t,type:S,key:u,ref:T,props:w,_owner:c.current}}return M.Fragment=o,M.jsx=f,M.jsxs=f,M}var X;function xe(){return X||(X=1,B.exports=Se()),B.exports}var r=xe(),W={},ee;function Ne(){if(ee)return W;ee=1;var e=ye();return W.createRoot=e.createRoot,W.hydrateRoot=e.hydrateRoot,W}var Re=Ne();const Ce=ce(Re),de=x.createContext(),ve=({children:e})=>{const[t,o]=x.useState(localStorage.getItem("parking_theme")==="light");x.useEffect(()=>{t?(document.body.classList.remove("dark"),localStorage.setItem("parking_theme","light")):(document.body.classList.add("dark"),localStorage.setItem("parking_theme","dark"))},[t]);const a=()=>o(!t);return r.jsx(de.Provider,{value:{isLight:t,toggleTheme:a},children:e})},ue=()=>x.useContext(de);var we=be();const Le=ce(we),te=e=>{let t;const o=new Set,a=(m,y)=>{const w=typeof m=="function"?m(t):m;if(!Object.is(w,t)){const u=t;t=y??(typeof w!="object"||w===null)?w:Object.assign({},t,w),o.forEach(T=>T(t,u))}},c=()=>t,S={setState:a,getState:c,getInitialState:()=>g,subscribe:m=>(o.add(m),()=>o.delete(m))},g=t=e(a,c,S);return S},je=(e=>e?te(e):te),Ee=e=>e;function Te(e,t=Ee){const o=P.useSyncExternalStore(e.subscribe,P.useCallback(()=>t(e.getState()),[e,t]),P.useCallback(()=>t(e.getInitialState()),[e,t]));return P.useDebugValue(o),o}const ae=e=>{const t=je(e),o=a=>Te(t,a);return Object.assign(o,t),o},De=(e=>e?ae(e):ae),p=De((e,t)=>({realtimeData:[],realtimeLoading:!0,realtimeError:null,lastRealtimeUpdate:null,historyData:[],historyLoading:!1,lastHistoryUpdate:null,fetchInProgress:!1,refreshCallback:null,stopAutoRefresh:null,cacheCleared:!1,setRealtimeData:a=>e({realtimeData:a}),setRealtimeLoading:a=>e({realtimeLoading:a}),setRealtimeError:a=>e({realtimeError:a}),setLastRealtimeUpdate:a=>e({lastRealtimeUpdate:a}),setHistoryData:a=>e({historyData:a}),setHistoryLoading:a=>e({historyLoading:a}),setLastHistoryUpdate:a=>e({lastHistoryUpdate:a}),setFetchInProgress:a=>e({fetchInProgress:a}),setRefreshCallback:a=>e({refreshCallback:a}),setStopAutoRefresh:a=>e({stopAutoRefresh:a}),setCacheCleared:a=>e({cacheCleared:a}),updateRealtimeState:a=>e(a),updateHistoryState:a=>e(a),resetStore:()=>e({realtimeData:[],realtimeLoading:!0,realtimeError:null,lastRealtimeUpdate:null,historyData:[],historyLoading:!1,lastHistoryUpdate:null,fetchInProgress:!1,refreshCallback:null})})),me=async()=>{const e=p.getState().refreshCallback;e?await e():console.warn("Refresh callback not set yet")},he=()=>{try{typeof localStorage<"u"&&(localStorage.removeItem("parking_realtime_cache"),localStorage.removeItem("parking_history_cache")),p.setState({fetchInProgress:!1,cacheCleared:!0});const e=p.getState().stopAutoRefresh;if(typeof e=="function")try{e()}catch(t){console.warn("stopAutoRefresh failed",t)}console.log("Cache cleared and auto-refresh stopped")}catch(e){console.error("clearCache failed",e)}};typeof window<"u"&&(window.clearCache=he);const Ie=x.createContext(),_e=["https://gd.zaparkuj.pl/api/freegroupcountervalue.json","https://gd.zaparkuj.pl/api/freegroupcountervalue-green.json"],ke="https://corsproxy.io/?",Ue="https://docs.google.com/spreadsheets/d/e/2PACX-1vTwLNDbg8KjlVHsZWj9JUnO_OBIyZaRgZ4gZ8_Gbyly2J3f6rlCW6lDHAihwbuLhxWbBkNMI1wdWRAq/pub?gid=411529798&single=true&output=csv",Ae="https://docs.google.com/forms/d/e/1FAIpQLSdeQ-rmw_VfOidGmtSNb9DLkt1RfPdduu-jH898sf3lhj17LA/formResponse",q={GREENDAY_VALUE:"entry.2026993163",GREENDAY_TIME:"entry.51469670",UNI_VALUE:"entry.1412144904",UNI_TIME:"entry.364658642"},se="parking_realtime_cache",Y="parking_history_cache",I={GD_TIME:"gd_time",GD_VALUE:"greenday free",UNI_TIME:"uni_time",UNI_VALUE:"uni free"},re=e=>e?e.trim().toLowerCase():"",Pe=(e,t)=>{if(!e)return null;const o=re(t);return Object.keys(e).find(a=>re(a)===o)||null},J=(e,t)=>{const o=Pe(e,t);if(!o)return;const a=e[o];return typeof a=="string"?a.trim():a},Fe=e=>{if(!e)return null;const t=e.includes("T")?e:e.replace(" ","T"),o=new Date(t);return Number.isNaN(o.getTime())?null:o},ne=(e,t,o)=>{if(!e)return null;const a=J(e,t),c=Fe(a);if(!c)return null;const d=J(e,o),f=d==null||d===""?null:Number(d);return{raw:a,date:c,value:Number.isNaN(f)?null:f}},Oe=e=>{if(!e||e.length===0)return{gd:null,uni:null};const t=e[e.length-1];return{gd:ne(t,I.GD_TIME,I.GD_VALUE),uni:ne(t,I.UNI_TIME,I.UNI_VALUE)}},oe=(e=[])=>{const t=new Set,o=[];return e.forEach(a=>{const c=J(a,I.GD_TIME)||"",d=J(a,I.UNI_TIME)||"",f=`${c}|||${d}`;t.has(f)||(t.add(f),o.push(a))}),o},ie=e=>{if(!e||!e.Timestamp)return null;const t=e.Timestamp.trim();if(!t)return null;const o=t.includes("T")?t:t.replace(" ","T"),a=new Date(o);if(Number.isNaN(a.getTime()))return null;const c=Number(e.CurrentFreeGroupCounterValue);return{raw:t,date:a,value:Number.isNaN(c)?null:c}},Ge=(e=[])=>Array.isArray(e)?e.map(t=>({...t||{}})):[],Me=(e,t)=>({[I.GD_TIME]:e?.Timestamp||"",[I.GD_VALUE]:e?.CurrentFreeGroupCounterValue??"",[I.UNI_TIME]:t?.Timestamp||"",[I.UNI_VALUE]:t?.CurrentFreeGroupCounterValue??""}),le=()=>{if(typeof localStorage>"u")return{rows:[],timestamp:null,last:{gd:null,uni:null}};const e=localStorage.getItem(Y);if(!e)return{rows:[],timestamp:null,last:{gd:null,uni:null}};try{const t=JSON.parse(e),o=Array.isArray(t.data)?t.data:[];return{rows:o,timestamp:t.timestamp||null,last:Oe(o)}}catch(t){return console.error("Failed to parse history cache snapshot:",t),{rows:[],timestamp:null,last:{gd:null,uni:null}}}},He=({children:e})=>{const t=p(s=>s.setRealtimeData),o=p(s=>s.setRealtimeLoading),a=p(s=>s.setRealtimeError),c=p(s=>s.setLastRealtimeUpdate),d=p(s=>s.setHistoryData),f=p(s=>s.setHistoryLoading),S=p(s=>s.setLastHistoryUpdate);p(s=>s.fetchInProgress),p(s=>s.setFetchInProgress);const g=p(s=>s.setRefreshCallback),m=p(s=>s.setStopAutoRefresh),y=p(s=>s.historyData),w=x.useRef(!1),u=p(s=>s.cacheCleared),T=x.useCallback(s=>{const l=Array.isArray(s)?s:[],b=new Date;d(l),S(b);try{localStorage.setItem(Y,JSON.stringify({data:l,timestamp:b.toISOString()})),console.log("History cache updated")}catch(i){console.error("Failed to cache history data:",i)}},[d,S]),D=x.useCallback(async s=>{try{const l=s[0],b=s[1];if(!l||!b){console.log("Missing data for form submission");return}const i=l.CurrentFreeGroupCounterValue||0,n=l.Timestamp||"",h=b.CurrentFreeGroupCounterValue||0,N=b.Timestamp||"",v=new URLSearchParams;v.append(q.GREENDAY_VALUE,i.toString()),v.append(q.GREENDAY_TIME,n),v.append(q.UNI_VALUE,h.toString()),v.append(q.UNI_TIME,N),console.log("Submitting to Google Form:",{greenDay:{value:i,time:n},uni:{value:h,time:N}});const _=await fetch(Ae,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v.toString(),mode:"no-cors"});console.log("Form submission completed")}catch(l){console.error("Failed to submit to Google Form:",l)}},[]),F=x.useCallback(async()=>{if(u){console.log("Cache cleared â€” skipping history fetch");return}f(!0);try{const l=await(await fetch(`${Ue}&time=${Date.now()}`,{cache:"no-store"})).text();Le.parse(l,{header:!0,skipEmptyLines:!0,complete:b=>{const i=oe(b.data||[]);console.log("CSV fetched, parsed, and deduplicated"),T(i),f(!1)}})}catch(s){console.error("Failed to fetch history data:",s),f(!1)}},[T,f]),U=x.useCallback(async()=>{if(u){console.log("Cache cleared â€” skipping realtime fetch");return}if(w.current){console.log("Fetch already in progress, skipping...");return}w.current=!0,o(!0),a(null);try{const s=localStorage.getItem(se);if(s)try{const i=JSON.parse(s);t(i.data),c(new Date(i.timestamp)),console.log("Real-time cache loaded")}catch(i){console.error("Failed to parse real-time cache:",i)}const l=await Promise.all(_e.map(i=>fetch(`${ke}${encodeURIComponent(i+"?time="+Date.now())}`).then(n=>n.ok?n.json():Promise.reject(`HTTP ${n.status}`))));t(l);const b=new Date;c(b);try{localStorage.setItem(se,JSON.stringify({data:l,timestamp:b.toISOString()}))}catch(i){console.error("Failed to cache real-time data:",i)}await H(l)}catch(s){console.error("Failed to fetch real-time data:",s),a(s.toString())}finally{o(!1),w.current=!1}},[t,o,a,c]),H=x.useCallback(async s=>{try{const l=ie(s[0]),b=ie(s[1]);console.log("API timestamps:",{gd:l?.date?.toISOString(),uni:b?.date?.toISOString()});let i=le();i.rows.length&&y.length===0&&(d(i.rows),i.timestamp&&S(new Date(i.timestamp)));const n=!l?.date||i.last.gd?.date&&l.date.getTime()<=i.last.gd.date.getTime(),h=!b?.date||i.last.uni?.date&&b.date.getTime()<=i.last.uni.date.getTime();if(i.rows.length>0&&n&&h){console.log("Fast path hit â€” cache already covers API timestamps");return}console.log("Slow path triggered â€” fetching CSV for reconciliation"),await F(),i=le(),i.rows.length&&(d(i.rows),i.timestamp&&S(new Date(i.timestamp)));const v=l?.date?!i.last.gd?.date||l.date.getTime()>i.last.gd.date.getTime():!1,_=b?.date?!i.last.uni?.date||b.date.getTime()>i.last.uni.date.getTime():!1;if(!v&&!_){console.log("After reconciliation, no newer timestamps detected");return}const R=Ge(s);for(;R.length<2;)R.push({});if(i.last.gd?.date){const C=l?.date;(!C||C.getTime()<i.last.gd.date.getTime())&&(R[0]={...R[0],Timestamp:i.last.gd.raw,CurrentFreeGroupCounterValue:i.last.gd.value??R[0].CurrentFreeGroupCounterValue??0})}if(i.last.uni?.date){const C=b?.date;(!C||C.getTime()<i.last.uni.date.getTime())&&(R[1]={...R[1],Timestamp:i.last.uni.raw,CurrentFreeGroupCounterValue:i.last.uni.value??R[1].CurrentFreeGroupCounterValue??0})}await D(R);const k=oe([...i.rows,Me(R[0],R[1])]);T(k)}catch(l){console.error("Error checking history update:",l)}},[F,y.length,T,D]);x.useEffect(()=>{const s=localStorage.getItem(Y);if(s)try{const l=JSON.parse(s);d(l.data),S(new Date(l.timestamp)),console.log("History cache loaded on mount")}catch(l){console.error("Failed to load history cache on mount:",l)}},[d,S]),x.useEffect(()=>{if(u){console.log("Cache cleared â€” skipping initial realtime fetch and auto-refresh");return}U();const s=setInterval(U,300*1e3);try{m(()=>()=>clearInterval(s))}catch(l){console.warn("Failed to register stopAutoRefresh",l)}return()=>clearInterval(s)},[U,m,u]);const L=x.useCallback(async()=>{console.log("Manual refresh triggered"),await U()},[U]);x.useEffect(()=>{g(L)},[L,g]);const j=p(s=>s.realtimeData),V=p(s=>s.realtimeLoading),$=p(s=>s.realtimeError),A=p(s=>s.lastRealtimeUpdate),O=p(s=>s.historyLoading),K=p(s=>s.lastHistoryUpdate),G={realtimeData:j,realtimeLoading:V,realtimeError:$,lastRealtimeUpdate:A,historyData:y,historyLoading:O,lastHistoryUpdate:K,refresh:L};return r.jsx(Ie.Provider,{value:G,children:e})},pe=({title:e,shortTitle:t,icon:o,onRefresh:a,updateStatus:c,currentView:d,setView:f,children:S})=>{const{isLight:g,toggleTheme:m}=ue();return r.jsxs("header",{className:"header-controls",children:[r.jsxs("div",{className:"header-title-group",children:[r.jsxs("h1",{children:[r.jsx("span",{className:"title-icon",children:o}),r.jsxs("span",{className:"title-text-full",children:[" ",e]}),r.jsxs("span",{className:"title-text-short",children:[" ",t||e]})]}),r.jsx("div",{className:"status-info",children:c})]}),r.jsxs("div",{className:"header-actions",children:[S,(typeof window<"u"?new URLSearchParams(window.location.search):new URLSearchParams).has("clear_cache")?r.jsxs("button",{className:"nav-btn",onClick:()=>he(),children:[r.jsx("span",{className:"btn-icon",children:"ðŸ§¹"}),r.jsx("span",{className:"btn-text",children:"Clear Cache"})]}):a?r.jsxs("button",{className:"nav-btn",onClick:a,children:[r.jsx("span",{className:"btn-icon",children:"âŸ³"}),r.jsx("span",{className:"btn-text",children:"Refresh"})]}):null,d==="stats"&&r.jsxs("button",{className:"nav-btn",onClick:()=>f("dashboard"),children:[r.jsx("span",{className:"btn-icon",children:"ðŸ "}),r.jsx("span",{className:"btn-text",children:"Dashboard"})]}),d==="dashboard"&&r.jsxs("button",{className:"nav-btn",onClick:()=>f("stats"),children:[r.jsx("span",{className:"btn-icon",children:"ðŸ“Š"}),r.jsx("span",{className:"btn-text",children:"Statistics"})]}),r.jsx("button",{className:"theme-toggle",onClick:m,"aria-label":"Toggle theme",children:g?"ðŸŒ™":"â˜€ï¸"})]})]})},Ve=({data:e,now:t})=>{const o=new Date(e.Timestamp.replace(" ","T")),a=Math.max(0,Math.floor((t-o)/1e3/60));let c="";a>=15?c="age-old":a>5&&(c="age-medium");let d=e.ParkingGroupName;return d==="Bank_1"&&(d="Uni Wroc"),r.jsxs("div",{className:"parking-card",children:[r.jsx("div",{className:"parking-name",children:d}),r.jsx("div",{className:`free-spots ${c}`,children:e.CurrentFreeGroupCounterValue||0}),r.jsxs("div",{className:"age-indicator-small",children:[a," min ago"]}),r.jsxs("div",{className:"timestamp-small",children:["@",o.toLocaleTimeString("pl-PL")]})]})},$e=({setView:e})=>{const t=p(m=>m.realtimeData),o=p(m=>m.realtimeLoading),a=p(m=>m.realtimeError),c=p(m=>m.lastRealtimeUpdate),[d,f]=x.useState(new Date);x.useEffect(()=>{const m=setInterval(()=>f(new Date),1e3);return()=>clearInterval(m)},[]);const S=t.reduce((m,y)=>m+(y.CurrentFreeGroupCounterValue||0),0),g=c?`Last update: ${c.toLocaleTimeString("pl-PL")}`:"Loading...";return r.jsxs(r.Fragment,{children:[r.jsx(pe,{title:"Parking Monitor",icon:"ðŸ…¿ï¸",onRefresh:me,updateStatus:g,currentView:"dashboard",setView:e}),r.jsxs("main",{className:"container-main",children:[r.jsx("div",{className:"subtitle",children:"Real-time parking availability â€¢ UBS WrocÅ‚aw"}),a&&r.jsxs("div",{className:"error",children:[r.jsx("strong",{children:"ERROR:"})," ",a]}),r.jsx("div",{className:"grid-container",children:o&&t.length===0?r.jsx("div",{className:"loader",children:"Loading parking data..."}):t.map((m,y)=>r.jsx(Ve,{data:m,now:d},y))}),r.jsxs("div",{className:"status-panel",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"status-label",children:"Total Spaces"}),r.jsx("div",{className:"status-value big-value",children:o?"---":S})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"status-label",children:"Data Status"}),r.jsx("div",{className:"status-value",style:{color:a?"var(--warning)":"var(--success)"},children:o?"LOADING":a?"OFFLINE":"ONLINE"})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"status-label",children:"Last Update / Current Time"}),r.jsxs("div",{className:"time-group",children:[r.jsx("span",{children:c?c.toLocaleTimeString("pl-PL"):"--:--:--"}),r.jsx("span",{className:"status-current-inline",children:d.toLocaleTimeString("pl-PL")})]})]})]})]})]})},z={neon:{gd:"#05ffa1",uni:"#01beff"},classic:{gd:"#3b82f6",uni:"#f59e0b"},cyberpunk:{gd:"#00d9ff",uni:"#ff00cc"},modern:{gd:"#10b981",uni:"#6366f1"}},Ke=({setView:e})=>{const t=p(u=>u.historyData),o=p(u=>u.historyLoading),[a,c]=P.useState("neon"),[d,f]=P.useState(!1),{isLight:S}=ue(),g=x.useRef({start:0,end:100}),m=x.useRef(null),y=x.useMemo(()=>{if(!t||t.length===0)return null;const u=S?"#1e293b":"#8b95c9",T=S?"#cbd5e1":"#2d3b6b",D=window.innerWidth<=600,F=new Map,U=new Map;t.forEach(n=>{const h=k=>Object.keys(n).find(C=>C.trim().toLowerCase()===k),N=h("gd_time"),v=h("greenday free"),_=h("uni_time"),R=h("uni free");if(N&&v&&n[N]&&n[v]){const k=n[N].trim(),C=parseFloat(n[v]);isNaN(C)||F.set(k,C)}if(_&&R&&n[_]&&n[R]){const k=n[_].trim(),C=parseFloat(n[R]);isNaN(C)||U.set(k,C)}});const H=n=>Array.from(n.entries()).map(([h,N])=>({t:new Date(h),v:N,raw:h})).filter(h=>!isNaN(h.t.getTime())).sort((h,N)=>h.t-N.t);let L=H(F),j=H(U);const V=n=>{const h=new Set;return n.filter(N=>{const v=`${N.raw}|${N.v}`;return h.has(v)?!1:(h.add(v),!0)})};if(L=V(L),j=V(j),L.length>0&&j.length>0){const n=L[0].t.getTime(),h=j[0].t.getTime();h<n&&(j[0].t=new Date(n),j[0].raw=L[0].raw),n<h&&(L[0].t=new Date(h),L[0].raw=j[0].raw)}const $=[...L.map(n=>n.t.getTime()),...j.map(n=>n.t.getTime())],A=$.length>0?Math.max(...$):null;let O=null;if(A){const n=L.find(N=>N.t.getTime()===A),h=j.find(N=>N.t.getTime()===A);O=(n||h)?.raw}const K=(n,h,N)=>{if(n.length===0)return{solid:[],gaps:[],projections:[]};const v=[],_=[],R=[],k=2400*1e3;for(let E=0;E<n.length;E++)v.push([n[E].raw,n[E].v]),E<n.length-1&&n[E+1].t-n[E].t>k&&(v.push([n[E+1].raw,null]),_.push([n[E].raw,n[E].v],[n[E+1].raw,n[E+1].v],[n[E+1].raw,null]));const C=n[n.length-1];return C&&h&&h-C.t.getTime()>1e3&&(R.push([C.raw,C.v]),R.push([N,C.v])),{solid:v,gaps:_,projections:R}},G=K(L,A,O),s=K(j,A,O),l=z[a],b=L.length>0?"GreenDay":"GreenDay - not found",i=j.length>0?"Uni Wroc":"Uni Wroc - not found";return{backgroundColor:"transparent",animation:!0,animationDuration:300,tooltip:{trigger:"axis",confine:!0,axisPointer:{type:"cross"}},legend:{data:[b,i],top:5,textStyle:{color:u}},grid:{left:D?10:15,right:D?10:15,bottom:D?80:50,top:40,containLabel:!0},xAxis:{type:"time",axisLabel:{color:u,margin:10},axisLine:{lineStyle:{color:T}},splitLine:{show:!1}},yAxis:{type:"value",min:-5,max:200,splitLine:{lineStyle:{color:T,opacity:.3}},axisLabel:{color:u,formatter:n=>n<0?"":n}},dataZoom:[{type:"inside",start:g.current.start,end:g.current.end,filterMode:"none"},{type:"slider",start:g.current.start,end:g.current.end,bottom:D?40:10,height:D?30:25,textStyle:{color:u,fontSize:D?11:12},filterMode:"none",handleSize:D?"180%":"100%",borderColor:u,fillerColor:"rgba(100, 149, 237, 0.3)",dataBackground:{lineStyle:{color:u,opacity:.5},areaStyle:{color:u,opacity:.2}},moveHandleSize:D?10:7,emphasis:{handleStyle:{borderWidth:2}}}],series:[{name:b,type:"line",data:G.solid,showSymbol:d,lineStyle:{width:3,color:l.gd},itemStyle:{color:l.gd},areaStyle:{color:new Z(0,0,0,1,[{offset:0,color:`${l.gd}33`},{offset:1,color:`${l.gd}00`}])},markLine:{symbol:"none",data:[{yAxis:187,lineStyle:{color:l.gd,type:"dotted",opacity:1},label:{position:"start",formatter:"187",color:l.gd,fontWeight:"bold",fontSize:13}}]}},{name:b,type:"line",data:G.gaps,showSymbol:!1,lineStyle:{width:2,color:l.gd,type:"dashed",opacity:.4},tooltip:{show:!1}},{name:b,type:"line",data:G.projections,showSymbol:!1,lineStyle:{width:1.5,color:l.gd,type:[5,5],opacity:.5},tooltip:{show:!1}},{name:i,type:"line",data:s.solid,showSymbol:d,lineStyle:{width:3,color:l.uni},itemStyle:{color:l.uni},areaStyle:{color:new Z(0,0,0,1,[{offset:0,color:`${l.uni}33`},{offset:1,color:`${l.uni}00`}])},markLine:{symbol:"none",data:[{yAxis:41,lineStyle:{color:l.uni,type:"dotted",opacity:1},label:{position:"start",formatter:"41",color:l.uni,fontWeight:"bold",fontSize:13}}]}},{name:i,type:"line",data:s.gaps,showSymbol:!1,lineStyle:{width:2,color:l.uni,type:"dashed",opacity:.4},tooltip:{show:!1}},{name:i,type:"line",data:s.projections,showSymbol:!1,lineStyle:{width:1.5,color:l.uni,type:[5,5],opacity:.5},tooltip:{show:!1}}]}},[t,a,d,S]),w={datazoom:u=>{u.batch&&u.batch[0]?g.current={start:u.batch[0].start,end:u.batch[0].end}:u.start!==void 0&&u.end!==void 0&&(g.current={start:u.start,end:u.end})}};return r.jsxs("div",{className:"page-wrapper",children:[r.jsx(pe,{title:"Parking History",shortTitle:"Hist",icon:"ðŸ“ˆ",onRefresh:me,updateStatus:o?"Updating...":"Ready",currentView:"stats",setView:e,children:r.jsxs("div",{className:"palette-group",children:[r.jsx("span",{className:"palette-label",children:"Palette:"}),Object.keys(z).map(u=>r.jsx("div",{className:`palette-btn ${a===u?"active":""}`,style:{background:`linear-gradient(135deg, ${z[u].gd} 50%, ${z[u].uni} 50%)`},onClick:()=>c(u),title:u.charAt(0).toUpperCase()+u.slice(1)},u)),r.jsxs("button",{className:"palette-toggle-btn",onClick:()=>f(!d),children:["Dots: ",d?"Off":"On"]})]})}),r.jsx("main",{className:"stats-container",children:o&&t.length===0?r.jsx("div",{className:"loader",children:"Loading history data..."}):y?r.jsx(fe,{ref:m,option:y,style:{height:"100%",width:"100%",touchAction:"none"},onEvents:w,notMerge:!1,lazyUpdate:!0,opts:{renderer:"canvas"}}):r.jsx("div",{className:"loader",children:"No data available to display."})})]})};function We(){const[e,t]=x.useState("dashboard");return r.jsx(ve,{children:r.jsx(He,{children:e==="dashboard"?r.jsx($e,{setView:t}):r.jsx(Ke,{setView:t})})})}const qe=Ce.createRoot(document.getElementById("root"));qe.render(r.jsx(P.StrictMode,{children:r.jsx(We,{})}));
