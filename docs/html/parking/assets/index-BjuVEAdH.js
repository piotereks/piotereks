import{r as pe,g as le,a as S,R as P,L as Y,E as ge}from"./vendor-echarts-nZu8rBDa.js";import{r as fe}from"./vendor-react-BVyvVbwp.js";import{r as ye}from"./vendor-utils-F0zOxUcV.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const g of d.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function n(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(c){if(c.ep)return;c.ep=!0;const d=n(c);fetch(c.href,d)}})();var J={exports:{}},M={};var Z;function be(){if(Z)return M;Z=1;var e=pe(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function g(b,p,w){var f,N={},o=null,R=null;w!==void 0&&(o=""+w),p.key!==void 0&&(o=""+p.key),p.ref!==void 0&&(R=p.ref);for(f in p)a.call(p,f)&&!d.hasOwnProperty(f)&&(N[f]=p[f]);if(b&&b.defaultProps)for(f in p=b.defaultProps,p)N[f]===void 0&&(N[f]=p[f]);return{$$typeof:t,type:b,key:o,ref:R,props:N,_owner:c.current}}return M.Fragment=n,M.jsx=g,M.jsxs=g,M}var Q;function Se(){return Q||(Q=1,J.exports=be()),J.exports}var s=Se(),K={},X;function xe(){if(X)return K;X=1;var e=fe();return K.createRoot=e.createRoot,K.hydrateRoot=e.hydrateRoot,K}var Ne=xe();const Ce=le(Ne),ce=S.createContext(),we=({children:e})=>{const[t,n]=S.useState(localStorage.getItem("parking_theme")==="light");S.useEffect(()=>{t?(document.body.classList.remove("dark"),localStorage.setItem("parking_theme","light")):(document.body.classList.add("dark"),localStorage.setItem("parking_theme","dark"))},[t]);const a=()=>n(!t);return s.jsx(ce.Provider,{value:{isLight:t,toggleTheme:a},children:e})},de=()=>S.useContext(ce);var Re=ye();const ve=le(Re),ee=e=>{let t;const n=new Set,a=(w,f)=>{const N=typeof w=="function"?w(t):w;if(!Object.is(N,t)){const o=t;t=f??(typeof N!="object"||N===null)?N:Object.assign({},t,N),n.forEach(R=>R(t,o))}},c=()=>t,b={setState:a,getState:c,getInitialState:()=>p,subscribe:w=>(n.add(w),()=>n.delete(w))},p=t=e(a,c,b);return b},Le=(e=>e?ee(e):ee),je=e=>e;function Ee(e,t=je){const n=P.useSyncExternalStore(e.subscribe,P.useCallback(()=>t(e.getState()),[e,t]),P.useCallback(()=>t(e.getInitialState()),[e,t]));return P.useDebugValue(n),n}const te=e=>{const t=Le(e),n=a=>Ee(t,a);return Object.assign(n,t),n},De=(e=>e?te(e):te),h=De((e,t)=>({realtimeData:[],realtimeLoading:!0,realtimeError:null,lastRealtimeUpdate:null,historyData:[],historyLoading:!1,lastHistoryUpdate:null,fetchInProgress:!1,refreshCallback:null,stopAutoRefresh:null,cacheCleared:!1,setRealtimeData:a=>e({realtimeData:a}),setRealtimeLoading:a=>e({realtimeLoading:a}),setRealtimeError:a=>e({realtimeError:a}),setLastRealtimeUpdate:a=>e({lastRealtimeUpdate:a}),setHistoryData:a=>e({historyData:a}),setHistoryLoading:a=>e({historyLoading:a}),setLastHistoryUpdate:a=>e({lastHistoryUpdate:a}),setFetchInProgress:a=>e({fetchInProgress:a}),setRefreshCallback:a=>e({refreshCallback:a}),setStopAutoRefresh:a=>e({stopAutoRefresh:a}),setCacheCleared:a=>e({cacheCleared:a}),updateRealtimeState:a=>e(a),updateHistoryState:a=>e(a),resetStore:()=>e({realtimeData:[],realtimeLoading:!0,realtimeError:null,lastRealtimeUpdate:null,historyData:[],historyLoading:!1,lastHistoryUpdate:null,fetchInProgress:!1,refreshCallback:null})})),ue=async()=>{const e=h.getState().refreshCallback;e?await e():console.warn("Refresh callback not set yet")},me=()=>{try{typeof localStorage<"u"&&(localStorage.removeItem("parking_realtime_cache"),localStorage.removeItem("parking_history_cache")),h.setState({fetchInProgress:!1,cacheCleared:!0});const e=h.getState().stopAutoRefresh;if(typeof e=="function")try{e()}catch(t){console.warn("stopAutoRefresh failed",t)}console.log("Cache cleared and auto-refresh stopped")}catch(e){console.error("clearCache failed",e)}};typeof window<"u"&&(window.clearCache=me);const Te=S.createContext(),Ie=["https://gd.zaparkuj.pl/api/freegroupcountervalue.json","https://gd.zaparkuj.pl/api/freegroupcountervalue-green.json"],_e="https://corsproxy.io/?",ke="https://docs.google.com/spreadsheets/d/e/2PACX-1vTwLNDbg8KjlVHsZWj9JUnO_OBIyZaRgZ4gZ8_Gbyly2J3f6rlCW6lDHAihwbuLhxWbBkNMI1wdWRAq/pub?gid=411529798&single=true&output=csv",Ue="https://docs.google.com/forms/d/e/1FAIpQLSdeQ-rmw_VfOidGmtSNb9DLkt1RfPdduu-jH898sf3lhj17LA/formResponse",W={GREENDAY_VALUE:"entry.2026993163",GREENDAY_TIME:"entry.51469670",UNI_VALUE:"entry.1412144904",UNI_TIME:"entry.364658642"},ae="parking_realtime_cache",B="parking_history_cache",I={GD_TIME:"gd_time",GD_VALUE:"greenday free",UNI_TIME:"uni_time",UNI_VALUE:"uni free"},se=e=>e?e.trim().toLowerCase():"",Ae=(e,t)=>{if(!e)return null;const n=se(t);return Object.keys(e).find(a=>se(a)===n)||null},z=(e,t)=>{const n=Ae(e,t);if(!n)return;const a=e[n];return typeof a=="string"?a.trim():a},Pe=e=>{if(!e)return null;const t=e.includes("T")?e:e.replace(" ","T"),n=new Date(t);return Number.isNaN(n.getTime())?null:n},re=(e,t,n)=>{if(!e)return null;const a=z(e,t),c=Pe(a);if(!c)return null;const d=z(e,n),g=d==null||d===""?null:Number(d);return{raw:a,date:c,value:Number.isNaN(g)?null:g}},Fe=e=>{if(!e||e.length===0)return{gd:null,uni:null};const t=e[e.length-1];return{gd:re(t,I.GD_TIME,I.GD_VALUE),uni:re(t,I.UNI_TIME,I.UNI_VALUE)}},oe=(e=[])=>{const t=new Set,n=[];return e.forEach(a=>{const c=z(a,I.GD_TIME)||"",d=z(a,I.UNI_TIME)||"",g=`${c}|||${d}`;t.has(g)||(t.add(g),n.push(a))}),n},ne=e=>{if(!e||!e.Timestamp)return null;const t=e.Timestamp.trim();if(!t)return null;const n=t.includes("T")?t:t.replace(" ","T"),a=new Date(n);if(Number.isNaN(a.getTime()))return null;const c=Number(e.CurrentFreeGroupCounterValue);return{raw:t,date:a,value:Number.isNaN(c)?null:c}},Oe=(e=[])=>Array.isArray(e)?e.map(t=>({...t||{}})):[],Me=(e,t)=>({[I.GD_TIME]:e?.Timestamp||"",[I.GD_VALUE]:e?.CurrentFreeGroupCounterValue??"",[I.UNI_TIME]:t?.Timestamp||"",[I.UNI_VALUE]:t?.CurrentFreeGroupCounterValue??""}),ie=()=>{if(typeof localStorage>"u")return{rows:[],timestamp:null,last:{gd:null,uni:null}};const e=localStorage.getItem(B);if(!e)return{rows:[],timestamp:null,last:{gd:null,uni:null}};try{const t=JSON.parse(e),n=Array.isArray(t.data)?t.data:[];return{rows:n,timestamp:t.timestamp||null,last:Fe(n)}}catch(t){return console.error("Failed to parse history cache snapshot:",t),{rows:[],timestamp:null,last:{gd:null,uni:null}}}},Ge=({children:e})=>{const t=h(r=>r.setRealtimeData),n=h(r=>r.setRealtimeLoading),a=h(r=>r.setRealtimeError),c=h(r=>r.setLastRealtimeUpdate),d=h(r=>r.setHistoryData),g=h(r=>r.setHistoryLoading),b=h(r=>r.setLastHistoryUpdate);h(r=>r.fetchInProgress),h(r=>r.setFetchInProgress);const p=h(r=>r.setRefreshCallback),w=h(r=>r.setStopAutoRefresh),f=h(r=>r.historyData),N=S.useRef(!1),o=h(r=>r.cacheCleared),R=S.useCallback(r=>{const l=Array.isArray(r)?r:[],y=new Date;d(l),b(y);try{localStorage.setItem(B,JSON.stringify({data:l,timestamp:y.toISOString()})),console.log("History cache updated")}catch(i){console.error("Failed to cache history data:",i)}},[d,b]),E=S.useCallback(async r=>{try{const l=r[0],y=r[1];if(!l||!y){console.log("Missing data for form submission");return}const i=l.CurrentFreeGroupCounterValue||0,u=l.Timestamp||"",m=y.CurrentFreeGroupCounterValue||0,x=y.Timestamp||"",L=new URLSearchParams;L.append(W.GREENDAY_VALUE,i.toString()),L.append(W.GREENDAY_TIME,u),L.append(W.UNI_VALUE,m.toString()),L.append(W.UNI_TIME,x),console.log("Submitting to Google Form:",{greenDay:{value:i,time:u},uni:{value:m,time:x}});const k=await fetch(Ue,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:L.toString(),mode:"no-cors"});console.log("Form submission completed")}catch(l){console.error("Failed to submit to Google Form:",l)}},[]),U=S.useCallback(async()=>{if(o){console.log("Cache cleared â€” skipping history fetch");return}g(!0);try{const l=await(await fetch(`${ke}&time=${Date.now()}`,{cache:"no-store"})).text();ve.parse(l,{header:!0,skipEmptyLines:!0,complete:y=>{const i=oe(y.data||[]);console.log("CSV fetched, parsed, and deduplicated"),R(i),g(!1)}})}catch(r){console.error("Failed to fetch history data:",r),g(!1)}},[R,g]),_=S.useCallback(async()=>{if(o){console.log("Cache cleared â€” skipping realtime fetch");return}if(N.current){console.log("Fetch already in progress, skipping...");return}N.current=!0,n(!0),a(null);try{const r=localStorage.getItem(ae);if(r)try{const i=JSON.parse(r);t(i.data),c(new Date(i.timestamp)),console.log("Real-time cache loaded")}catch(i){console.error("Failed to parse real-time cache:",i)}const l=await Promise.all(Ie.map(i=>fetch(`${_e}${encodeURIComponent(i+"?time="+Date.now())}`).then(u=>u.ok?u.json():Promise.reject(`HTTP ${u.status}`))));t(l);const y=new Date;c(y);try{localStorage.setItem(ae,JSON.stringify({data:l,timestamp:y.toISOString()}))}catch(i){console.error("Failed to cache real-time data:",i)}await G(l)}catch(r){console.error("Failed to fetch real-time data:",r),a(r.toString())}finally{n(!1),N.current=!1}},[t,n,a,c]),G=S.useCallback(async r=>{try{const l=ne(r[0]),y=ne(r[1]);console.log("API timestamps:",{gd:l?.date?.toISOString(),uni:y?.date?.toISOString()});let i=ie();i.rows.length&&f.length===0&&(d(i.rows),i.timestamp&&b(new Date(i.timestamp)));const u=!l?.date||i.last.gd?.date&&l.date.getTime()<=i.last.gd.date.getTime(),m=!y?.date||i.last.uni?.date&&y.date.getTime()<=i.last.uni.date.getTime();if(i.rows.length>0&&u&&m){console.log("Fast path hit â€” cache already covers API timestamps");return}console.log("Slow path triggered â€” fetching CSV for reconciliation"),await U(),i=ie(),i.rows.length&&(d(i.rows),i.timestamp&&b(new Date(i.timestamp)));const L=l?.date?!i.last.gd?.date||l.date.getTime()>i.last.gd.date.getTime():!1,k=y?.date?!i.last.uni?.date||y.date.getTime()>i.last.uni.date.getTime():!1;if(!L&&!k){console.log("After reconciliation, no newer timestamps detected");return}const C=Oe(r);for(;C.length<2;)C.push({});if(i.last.gd?.date){const v=l?.date;(!v||v.getTime()<i.last.gd.date.getTime())&&(C[0]={...C[0],Timestamp:i.last.gd.raw,CurrentFreeGroupCounterValue:i.last.gd.value??C[0].CurrentFreeGroupCounterValue??0})}if(i.last.uni?.date){const v=y?.date;(!v||v.getTime()<i.last.uni.date.getTime())&&(C[1]={...C[1],Timestamp:i.last.uni.raw,CurrentFreeGroupCounterValue:i.last.uni.value??C[1].CurrentFreeGroupCounterValue??0})}await E(C);const T=oe([...i.rows,Me(C[0],C[1])]);R(T)}catch(l){console.error("Error checking history update:",l)}},[U,f.length,R,E]);S.useEffect(()=>{const r=localStorage.getItem(B);if(r)try{const l=JSON.parse(r);d(l.data),b(new Date(l.timestamp)),console.log("History cache loaded on mount")}catch(l){console.error("Failed to load history cache on mount:",l)}},[d,b]),S.useEffect(()=>{if(o){console.log("Cache cleared â€” skipping initial realtime fetch and auto-refresh");return}_();const r=setInterval(_,300*1e3);try{w(()=>()=>clearInterval(r))}catch(l){console.warn("Failed to register stopAutoRefresh",l)}return()=>clearInterval(r)},[_,w,o]);const j=S.useCallback(async()=>{console.log("Manual refresh triggered"),await _()},[_]);S.useEffect(()=>{p(j)},[j,p]);const D=h(r=>r.realtimeData),H=h(r=>r.realtimeLoading),V=h(r=>r.realtimeError),A=h(r=>r.lastRealtimeUpdate),F=h(r=>r.historyLoading),$=h(r=>r.lastHistoryUpdate),O={realtimeData:D,realtimeLoading:H,realtimeError:V,lastRealtimeUpdate:A,historyData:f,historyLoading:F,lastHistoryUpdate:$,refresh:j};return s.jsx(Te.Provider,{value:O,children:e})},he=({title:e,shortTitle:t,icon:n,onRefresh:a,updateStatus:c,currentView:d,setView:g,children:b})=>{const{isLight:p,toggleTheme:w}=de();return s.jsxs("header",{className:"header-controls",children:[s.jsxs("div",{className:"header-title-group",children:[s.jsxs("h1",{children:[s.jsx("span",{className:"title-icon",children:n}),s.jsxs("span",{className:"title-text-full",children:[" ",e]}),s.jsxs("span",{className:"title-text-short",children:[" ",t||e]})]}),s.jsx("div",{className:"status-info",children:c})]}),s.jsxs("div",{className:"header-actions",children:[b,(typeof window<"u"?new URLSearchParams(window.location.search):new URLSearchParams).has("clear_cache")?s.jsxs("button",{className:"nav-btn",onClick:()=>me(),children:[s.jsx("span",{className:"btn-icon",children:"ðŸ§¹"}),s.jsx("span",{className:"btn-text",children:"Clear Cache"})]}):a?s.jsxs("button",{className:"nav-btn",onClick:a,children:[s.jsx("span",{className:"btn-icon",children:"âŸ³"}),s.jsx("span",{className:"btn-text",children:"Refresh"})]}):null,d==="stats"&&s.jsxs("button",{className:"nav-btn",onClick:()=>g("dashboard"),children:[s.jsx("span",{className:"btn-icon",children:"ðŸ "}),s.jsx("span",{className:"btn-text",children:"Dashboard"})]}),d==="dashboard"&&s.jsxs("button",{className:"nav-btn",onClick:()=>g("stats"),children:[s.jsx("span",{className:"btn-icon",children:"ðŸ“Š"}),s.jsx("span",{className:"btn-text",children:"Statistics"})]}),s.jsx("button",{className:"theme-toggle",onClick:w,"aria-label":"Toggle theme",children:p?"ðŸŒ™":"â˜€ï¸"})]})]})},He=({data:e,now:t})=>{const n=new Date(e.Timestamp.replace(" ","T")),a=Math.max(0,Math.floor((t-n)/1e3/60));let c="";a>=15?c="age-old":a>5&&(c="age-medium");let d=e.ParkingGroupName;return d==="Bank_1"&&(d="Uni Wroc"),s.jsxs("div",{className:"parking-card",children:[s.jsx("div",{className:"parking-name",children:d}),s.jsx("div",{className:`free-spots ${c}`,children:e.CurrentFreeGroupCounterValue||0}),s.jsxs("div",{className:"age-indicator-small",children:[a," min ago"]}),s.jsxs("div",{className:"timestamp-small",children:["@",n.toLocaleTimeString("pl-PL")]})]})},Ve=({setView:e})=>{const t=h(o=>o.realtimeData),n=h(o=>o.realtimeLoading),a=h(o=>o.realtimeError),c=h(o=>o.lastRealtimeUpdate),[d,g]=S.useState(new Date);S.useEffect(()=>{const o=setInterval(()=>g(new Date),1e3);return()=>clearInterval(o)},[]);const b=t.reduce((o,R)=>o+(R.CurrentFreeGroupCounterValue||0),0),p=c?`Last update: ${c.toLocaleTimeString("pl-PL")}`:"Loading...",w=()=>{if(t.length===0)return{colorClass:"",statusMessage:"No data available"};let o=0;return t.forEach(R=>{const E=new Date(R.Timestamp.replace(" ","T")),U=Math.max(0,Math.floor((d-E)/1e3/60));o=Math.max(o,U)}),o>=15?{colorClass:"age-old",statusMessage:"Data outdated - figures may not reflect actual free spaces"}:o>5?{colorClass:"age-medium",statusMessage:"Data slightly outdated - refresh recommended"}:{colorClass:"",statusMessage:"Data is current and reliable"}},{colorClass:f,statusMessage:N}=w();return s.jsxs(s.Fragment,{children:[s.jsx(he,{title:"Parking Monitor",icon:"ðŸ…¿ï¸",onRefresh:ue,updateStatus:p,currentView:"dashboard",setView:e}),s.jsxs("main",{className:"container-main",children:[s.jsx("div",{className:"subtitle",children:"Real-time parking availability â€¢ UBS WrocÅ‚aw"}),a&&s.jsxs("div",{className:"error",children:[s.jsx("strong",{children:"ERROR:"})," ",a]}),s.jsx("div",{className:"grid-container",children:n&&t.length===0?s.jsx("div",{className:"loader",children:"Loading parking data..."}):t.map((o,R)=>s.jsx(He,{data:o,now:d},R))}),s.jsx("div",{className:`status-description ${f}`,children:N}),s.jsx("div",{className:"status-panel",children:s.jsxs("div",{className:"panel-sections-wrapper",children:[s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"status-label",children:"Total Spaces"}),s.jsx("div",{className:`status-value big-value ${f}`,children:n?"---":b})]}),s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"status-label",children:"Last Update / Current Time"}),s.jsxs("div",{className:"time-group",children:[s.jsx("span",{children:c?c.toLocaleTimeString("pl-PL"):"--:--:--"}),s.jsx("span",{className:"status-current-inline",children:d.toLocaleTimeString("pl-PL")})]})]}),s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"status-label",children:"Data Status"}),s.jsx("div",{className:"status-value",style:{color:a?"var(--warning)":"var(--success)"},children:n?"LOADING":a?"OFFLINE":"ONLINE"})]})]})})]})]})},q={neon:{gd:"#05ffa1",uni:"#01beff"},classic:{gd:"#3b82f6",uni:"#f59e0b"},cyberpunk:{gd:"#00d9ff",uni:"#ff00cc"},modern:{gd:"#10b981",uni:"#6366f1"}},$e=({setView:e})=>{const t=h(o=>o.historyData),n=h(o=>o.historyLoading),[a,c]=P.useState("neon"),[d,g]=P.useState(!1),{isLight:b}=de(),p=S.useRef({start:0,end:100}),w=S.useRef(null),f=S.useMemo(()=>{if(!t||t.length===0)return null;const o=b?"#1e293b":"#8b95c9",R=b?"#cbd5e1":"#2d3b6b",E=window.innerWidth<=600,U=new Map,_=new Map;t.forEach(u=>{const m=T=>Object.keys(u).find(v=>v.trim().toLowerCase()===T),x=m("gd_time"),L=m("greenday free"),k=m("uni_time"),C=m("uni free");if(x&&L&&u[x]&&u[L]){const T=u[x].trim(),v=parseFloat(u[L]);isNaN(v)||U.set(T,v)}if(k&&C&&u[k]&&u[C]){const T=u[k].trim(),v=parseFloat(u[C]);isNaN(v)||_.set(T,v)}});const G=u=>Array.from(u.entries()).map(([m,x])=>({t:new Date(m),v:x,raw:m})).filter(m=>!isNaN(m.t.getTime())).sort((m,x)=>m.t-x.t);let j=G(U),D=G(_);const H=u=>{const m=new Set;return u.filter(x=>{const L=`${x.raw}|${x.v}`;return m.has(L)?!1:(m.add(L),!0)})};if(j=H(j),D=H(D),j.length>0&&D.length>0){const u=j[0].t.getTime(),m=D[0].t.getTime();m<u&&(D[0].t=new Date(u),D[0].raw=j[0].raw),u<m&&(j[0].t=new Date(m),j[0].raw=D[0].raw)}const V=[...j.map(u=>u.t.getTime()),...D.map(u=>u.t.getTime())],A=V.length>0?Math.max(...V):null;let F=null;if(A){const u=j.find(x=>x.t.getTime()===A),m=D.find(x=>x.t.getTime()===A);F=(u||m)?.raw}const $=(u,m,x)=>{if(u.length===0)return{solid:[],gaps:[],projections:[]};const L=[],k=[],C=[];for(let v=0;v<u.length;v++)L.push([u[v].raw,u[v].v]);const T=u[u.length-1];return T&&m&&m-T.t.getTime()>1e3&&(C.push([T.raw,T.v]),C.push([x,T.v])),{solid:L,gaps:k,projections:C}},O=$(j,A,F),r=$(D,A,F),l=q[a],y=j.length>0?"GreenDay":"GreenDay - not found",i=D.length>0?"Uni Wroc":"Uni Wroc - not found";return{backgroundColor:"transparent",animation:!0,animationDuration:300,tooltip:{trigger:"axis",confine:!0,axisPointer:{type:"cross"}},legend:{data:[y,i],top:5,textStyle:{color:o}},grid:{left:E?10:15,right:E?10:15,bottom:E?80:50,top:40,containLabel:!0},xAxis:{type:"time",axisLabel:{color:o,margin:10},axisLine:{lineStyle:{color:R}},splitLine:{show:!1}},yAxis:{type:"value",min:-5,max:200,splitLine:{lineStyle:{color:R,opacity:.3}},axisLabel:{color:o,formatter:u=>u<0?"":u}},dataZoom:[{type:"inside",start:p.current.start,end:p.current.end,filterMode:"none"},{type:"slider",start:p.current.start,end:p.current.end,bottom:E?40:10,height:E?30:25,textStyle:{color:o,fontSize:E?11:12},filterMode:"none",handleSize:E?"180%":"100%",borderColor:o,fillerColor:"rgba(100, 149, 237, 0.3)",dataBackground:{lineStyle:{color:o,opacity:.5},areaStyle:{color:o,opacity:.2}},moveHandleSize:E?10:7,emphasis:{handleStyle:{borderWidth:2}}}],series:[{name:y,type:"line",data:O.solid,showSymbol:d,lineStyle:{width:3,color:l.gd},itemStyle:{color:l.gd},areaStyle:{color:new Y(0,0,0,1,[{offset:0,color:`${l.gd}33`},{offset:1,color:`${l.gd}00`}])},markLine:{symbol:"none",data:[{yAxis:187,lineStyle:{color:l.gd,type:"dotted",opacity:1},label:{position:"start",formatter:"187",color:l.gd,fontWeight:"bold",fontSize:13}}]}},{name:y,type:"line",data:O.gaps,showSymbol:!1,lineStyle:{width:2,color:l.gd,type:"dashed",opacity:.4},tooltip:{show:!1}},{name:y,type:"line",data:O.projections,showSymbol:!1,lineStyle:{width:1.5,color:l.gd,type:[5,5],opacity:.5},tooltip:{show:!1}},{name:i,type:"line",data:r.solid,showSymbol:d,lineStyle:{width:3,color:l.uni},itemStyle:{color:l.uni},areaStyle:{color:new Y(0,0,0,1,[{offset:0,color:`${l.uni}33`},{offset:1,color:`${l.uni}00`}])},markLine:{symbol:"none",data:[{yAxis:41,lineStyle:{color:l.uni,type:"dotted",opacity:1},label:{position:"start",formatter:"41",color:l.uni,fontWeight:"bold",fontSize:13}}]}},{name:i,type:"line",data:r.gaps,showSymbol:!1,lineStyle:{width:2,color:l.uni,type:"dashed",opacity:.4},tooltip:{show:!1}},{name:i,type:"line",data:r.projections,showSymbol:!1,lineStyle:{width:1.5,color:l.uni,type:[5,5],opacity:.5},tooltip:{show:!1}}]}},[t,a,d,b]),N={datazoom:o=>{o.batch&&o.batch[0]?p.current={start:o.batch[0].start,end:o.batch[0].end}:o.start!==void 0&&o.end!==void 0&&(p.current={start:o.start,end:o.end})}};return s.jsxs("div",{className:"page-wrapper",children:[s.jsx(he,{title:"Parking History",shortTitle:"Hist",icon:"ðŸ“ˆ",onRefresh:ue,updateStatus:n?"Updating...":"Ready",currentView:"stats",setView:e,children:s.jsxs("div",{className:"palette-group",children:[s.jsx("span",{className:"palette-label",children:"Palette:"}),Object.keys(q).map(o=>s.jsx("div",{className:`palette-btn ${a===o?"active":""}`,style:{background:`linear-gradient(135deg, ${q[o].gd} 50%, ${q[o].uni} 50%)`},onClick:()=>c(o),title:o.charAt(0).toUpperCase()+o.slice(1)},o)),s.jsxs("button",{className:"palette-toggle-btn",onClick:()=>g(!d),children:["Dots: ",d?"Off":"On"]})]})}),s.jsx("main",{className:"stats-container",children:n&&t.length===0?s.jsx("div",{className:"loader",children:"Loading history data..."}):f?s.jsx(ge,{ref:w,option:f,style:{height:"100%",width:"100%",touchAction:"none"},onEvents:N,notMerge:!1,lazyUpdate:!0,opts:{renderer:"canvas"}}):s.jsx("div",{className:"loader",children:"No data available to display."})})]})};function Ke(){const[e,t]=S.useState("dashboard");return s.jsx(we,{children:s.jsx(Ge,{children:e==="dashboard"?s.jsx(Ve,{setView:t}):s.jsx($e,{setView:t})})})}const We=Ce.createRoot(document.getElementById("root"));We.render(s.jsx(P.StrictMode,{children:s.jsx(Ke,{})}));
